(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2679],{25794:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts",function(){return s(26472)}])},25120:function(e,t,s){"use strict";s.d(t,{D:function(){return w}});var r=s(85893),a=s(80061),n=s(7414),i=s(95117),l=s(93648),o=s(49834),d=s(73221),c=s(27728),u=s(89604),m=s(74094),x=s(27060),h=s(67294),g=s(66589),p=s(89743),f=s(83738);let j=(e,t,s,r)=>{let a=(0,u.O4)(e.getValue(t),s);return r({itemRank:a}),a.passed};function w(e){var t;let{columns:s,data:u}=e,[w,y]=h.useState({pageIndex:0,pageSize:10}),[b,v]=h.useState([]),[N,C]=h.useState(""),k=(0,m.b7)({data:u,columns:s,state:{sorting:b,pagination:w,globalFilter:N},globalFilterFn:j,onGlobalFilterChange:C,onSortingChange:v,onPaginationChange:y,getCoreRowModel:(0,x.sC)(),getFilteredRowModel:(0,x.vL)(),getPaginationRowModel:(0,x.G_)(),getSortedRowModel:(0,x.tj)()});return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"border rounded shadow-md border-slate-300 border-opacity-30 text-[12px]",children:[(0,r.jsx)("div",{className:"mx-2 mt-2",children:(0,r.jsx)(a.o,{className:"mt-6",placeholder:"Type a keyword to search...",type:"text",value:null!=N?N:"",onChange:e=>C(String(e.target.value))})}),(0,r.jsx)("div",{className:"overflow-auto",children:(0,r.jsxs)("table",{className:"min-w-[1000px] w-full border-transparent",children:[(0,r.jsx)("thead",{className:"",children:k.getHeaderGroups().map(e=>(0,r.jsx)("tr",{className:"p-0 m-0 border-none",children:e.headers.map(e=>(0,r.jsx)("th",{style:{width:150!==e.getSize()?e.getSize():void 0},className:"w-[".concat(e.getSize(),"%]  dark:border-gray-700 text-left py-3 px-2 bg-slate-100 dark:bg-gray-800  text-gray-600 dark:text-gray-300  font-bold"),children:e.isPlaceholder?null:(0,r.jsxs)("div",{className:e.column.getCanSort()?"cursor-pointer select-none flex items-center align-middle":"flex",onClick:e.column.getToggleSortingHandler(),children:[(0,m.ie)(e.column.columnDef.header,e.getContext()),null!==(t=({asc:(0,r.jsx)(g.Z,{className:"ml-1"}),desc:(0,r.jsx)(p.Z,{className:"ml-1"})})[e.column.getIsSorted()])&&void 0!==t?t:(0,r.jsx)(f.Z,{className:"ml-1 text-transparent"})]})},e.id))},e.id))}),(0,r.jsx)("tbody",{children:k.getRowModel().rows.map(e=>(0,r.jsx)("tr",{className:"transition hover:bg-slate-50 hover hover:dark:bg-dark-400",children:e.getVisibleCells().map(e=>(0,r.jsx)("td",{className:"text-left text-[13.5px] py-4 px-2 border-b border-gray-100 dark:border-gray-700",children:(0,m.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2 px-4 py-3",children:[(0,r.jsxs)(n.x,{className:"flex items-center mr-0",children:[(0,r.jsx)(i.x,{className:"mr-2",children:"Rows per page"}),(0,r.jsx)(l.Ph,{className:"w-[70px] p-0 mb-0 native-select-table",iconWidth:0,placeholder:"10",value:w.pageSize.toString(),onChange:e=>{k.setPageSize(Number(e))},data:[{value:"10",label:"10"},{value:"20",label:"20"},{value:"30",label:"30"},{value:"40",label:"40"},{value:"50",label:"50"}]})]}),(0,r.jsxs)("span",{className:"flex items-center gap-1 mr-4",children:[(0,r.jsx)("div",{children:"Page"}),(0,r.jsxs)(i.x,{children:[k.getState().pagination.pageIndex+1," of ",k.getPageCount()]})]}),(0,r.jsxs)(n.x,{className:"flex",children:[(0,r.jsx)(o.A,{className:"mr-2",variant:"subtle",onClick:()=>k.previousPage(),disabled:!k.getCanPreviousPage(),children:(0,r.jsx)(d.Z,{size:30})}),(0,r.jsx)(o.A,{variant:"subtle",onClick:()=>k.nextPage(),disabled:!k.getCanNextPage(),children:(0,r.jsx)(c.Z,{size:30})})]})]})]})})}},96125:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var r=s(85893),a=s(11163),n=s(67294),i=s(45578),l=s(70247);function o(e){let{children:t}=e,{pathname:s,push:o}=(0,a.useRouter)(),[d,c]=(0,n.useState)(null),{isAuthenticated:u,isInitialized:m,authUser:x}=(0,i.a)(e=>e);return((0,n.useEffect)(()=>{d&&s!==d&&(c(null),o(d))},[s,o,d]),m)?s.includes("/reset-password")?(s!==d&&c(s),o("/reset-password"),(0,r.jsx)("div",{})):!u&&s.includes("/signin")?(s!==d&&c(s),o("/signin"),(0,r.jsx)("div",{})):u?u&&((null==x?void 0:x.isSuperAdmin)===!0||(null==x?void 0:x.isAdmin)===!0||(null==x?void 0:x.isTestAdmin)===!0)?(0,r.jsx)(r.Fragment,{children:t}):u&&(null==x?void 0:x.isSuperAdmin)===!1&&(null==x?void 0:x.isAdmin)===!1&&(null==x?void 0:x.isTestAdmin)===!1?(0,r.jsx)(l.default,{}):(0,r.jsx)("div",{}):(o("/signin"),(0,r.jsx)("div",{})):(0,r.jsx)("div",{})}},67725:function(e,t,s){"use strict";s.d(t,{$f:function(){return o},K$:function(){return d},d3:function(){return u},td:function(){return l}});var r=s(39828),a=s(21315),n=s(6418),i=s(85477);async function l(e){try{let t=n.U_.currentUser,s=await (0,i.V)(t.uid);if(!s)throw Error("No user found!");if(!s.isSuperAdmin&&!s.isAdmin)throw Error("You are not authorized to update links settings.");let l=(0,r.IO)((0,r.hJ)(n.$V,"posts"),(0,r.ar)("name","==",e.title)),o=(0,r.IO)((0,r.hJ)(n.$V,"posts"),(0,r.ar)("slug","==",e.slug)),d=await (0,r.PL)(l),c=await (0,r.PL)(o);if(d.size>0||c.size>0)throw Error("Post name or slug already exists");return await (0,r.ET)((0,r.hJ)(n.$V,"posts"),{...a.y.toJson(e),timestampCreated:(0,r.Bt)(),timestampUpdated:(0,r.Bt)()}),await m(),!0}catch(e){throw Error(e.message)}}async function o(e,t){let s={...a.y.toJson(t),timestampUpdated:(0,r.Bt)()};delete s.timestampCreated;try{let t=n.U_.currentUser,a=await (0,i.V)(t.uid);if(!a)throw Error("No user found!");if(!a.isSuperAdmin&&!a.isAdmin)throw Error("You are not authorized to update links settings.");return await (0,r.r7)((0,r.JU)(n.$V,"posts",e),{...s}),await m(),!0}catch(e){throw Error(e.message)}}async function d(e){try{let t=await (0,r.QT)((0,r.JU)(n.$V,"posts",e));if(!t.data())return null;return a.y.fromJson({...t.data(),id:t.id})}catch(e){throw Error(e.message)}}async function c(){try{let e=await (0,r.PL)((0,r.IO)((0,r.hJ)(n.$V,"posts"),(0,r.ar)("status","==","Published"),(0,r.b9)(50)));return e.docs.map(e=>a.y.fromJson({...e.data(),id:e.id}))}catch(e){throw Error(e.message)}}async function u(e){try{let t=n.U_.currentUser,s=await (0,i.V)(t.uid);if(!s)throw Error("No user found!");if(!s.isSuperAdmin&&!s.isAdmin)throw Error("You are not authorized to update links settings.");return await (0,r.oe)((0,r.JU)(n.$V,"posts",e)),await m(),!0}catch(e){throw console.log(e),Error(e.message)}}async function m(){try{let e=await c(),t=e.map(e=>a.y.toJson(e));return await (0,r.pl)((0,r.JU)(n.$V,"postsAggr","posts"),{data:t,timestampUpdated:(0,r.Bt)()}),!0}catch(e){throw console.log(e),Error(e.message)}}},70247:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var r=s(85893),a=s(7414),n=s(95117),i=s(67841),l=s(11163),o=s(58185),d=s(43759);function c(){let e=(0,l.useRouter)();return(0,r.jsx)(o.Z,{title:"No Access",children:(0,r.jsxs)(a.x,{className:"flex flex-col items-center justify-center h-screen dark:bg-dark-100 bg-light-100",children:[(0,r.jsx)(n.x,{className:"mb-10 font-bold",children:"You dont have access to this page. Please contact the admin."}),(0,r.jsx)("img",{src:"/svg/404.svg",className:"h-[300px]"}),(0,r.jsx)(i.z,{onClick:function(){(0,d.w7)(),e.push("/signin")},className:"w-[200px] mt-12 border-0 bg-app-primary text-white hover:bg-opacity-90 transition",children:"Back to sign in"})]})})}},26472:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var r=s(85893),a=s(7414),n=s(72445),i=s(95117),l=s(67841),o=s(38276),d=s(74922),c=s(27060),u=s(41664),m=s.n(u),x=s(11163),h=s(78274),g=s(58185),p=s(25120),f=s(96125),j=s(3649),w=s(67725),y=s(45578),b=s(84732);let v=(0,c.Cl)(),N=[v.accessor("title",{header:"Title",cell:e=>(0,r.jsx)(a.x,{className:"",children:e.getValue()}),size:1e3}),v.accessor("status",{header:"Status",cell:e=>e.getValue(),size:140}),v.accessor("timestampCreated",{header:"Created",cell:e=>(0,b.Mu)(e.getValue()),size:140}),v.accessor("timestampUpdated",{header:"Updated",cell:e=>(0,b.Mu)(e.getValue()),size:140}),v.accessor("id",{header:"Action",cell:e=>(0,r.jsx)(a.x,{className:"flex items-center justify-center ",children:(0,r.jsx)(k,{post:e.row.original})}),size:0})];function C(){let{posts:e}=(0,y.a)(e=>e);return(0,x.useRouter)(),(0,r.jsx)(f.Z,{children:(0,r.jsx)(j.Z,{variant:"admin",children:(0,r.jsx)(g.Z,{title:"Post",children:(0,r.jsxs)(n.W,{className:"max-w-[1600px] mt-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)(i.x,{className:"text-2xl font-semibold leading-10 cursor-pointer",children:"Posts"}),(0,r.jsx)(m(),{href:"/posts/new",children:(0,r.jsx)(l.z,{className:"btn-app",children:"New Post"})})]}),(0,r.jsx)("div",{className:"mt-14"}),(0,r.jsx)(p.D,{data:e,columns:N})]})})})})}function k(e){let{post:t}=e;(0,x.useRouter)();let s=(0,o.o)(),n=async(e,t)=>{s.closeModal(e);try{await (0,w.d3)(t.id),(0,d.c0)({title:"Success",message:"post deleted",autoClose:6e3})}catch(e){(0,d.c0)({color:"red",title:"Error",message:"Error deleting post",autoClose:6e3})}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m(),{href:"/posts/".concat(t.id),children:(0,r.jsx)(h.Z,{className:"bg-slate-100 dark:bg-slate-700 rounded-full p-2 w-[30px] h-[30px]",icon:"akar-icons:edit"})}),(0,r.jsx)(a.x,{className:"flex",onClick:()=>{let e=s.openModal({title:"Are you sure you want to proceed?",centered:!0,children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.x,{size:"sm",children:"Yes, delete this post."}),(0,r.jsxs)(a.x,{className:"flex justify-end mt-6",children:[(0,r.jsx)(l.z,{className:"mx-2 mr-4 w-min btn-secondary",fullWidth:!0,onClick:()=>s.closeModal(e),mt:"md",children:"No don't do it"}),(0,r.jsx)(l.z,{className:" w-min btn-delete mx",fullWidth:!0,onClick:()=>n(e,t),mt:"md",children:"Delete"})]})]})})},children:(0,r.jsx)(h.Z,{className:"bg-red-200 rounded-full p-2 w-[30px] h-[30px] ml-2 text-red-500 cursor-pointer",icon:"fluent:delete-12-filled",width:20,height:20})})]})}},84732:function(e,t,s){"use strict";s.d(t,{Mu:function(){return n},Pp:function(){return i}});var r=s(56794),a=s(39828);function n(e){return e?(e instanceof a.EK&&(e=e.toDate()),(0,r.Z)(new Date(e),"dd MMM, yyyy")):""}function i(e){return e?(e instanceof a.EK&&(e=e.toDate()),(0,r.Z)(new Date(e),"MMM-d-yyyy @ p")):""}}},function(e){e.O(0,[4793,3053,3143,3981,7928,2888,179],function(){return e(e.s=25794)}),_N_E=e.O()}]);