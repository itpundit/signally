(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8108],{7916:function(e,s,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/[id]",function(){return i(76652)}])},25758:function(e,s,i){"use strict";i.d(s,{X:function(){return a}});var t=i(85893),n=i(7414),l=i(95117);function a(e){let{}=e;return(0,t.jsxs)(n.x,{className:"border p-10 flex flex-col items-center rounded-md",children:[(0,t.jsx)("img",{className:"w-[400px] object-contain",src:"/images/form-error.png",alt:""}),(0,t.jsx)(l.x,{className:"text-center mt-10",children:"There was an error loading the form. Please try again later."})]})}i(67294)},39140:function(e,s,i){"use strict";i.d(s,{Z:function(){return a}});var t=i(85893),n=i(7414),l=i(38623);function a(e){let{}=e;return(0,t.jsxs)(n.x,{className:"",children:[(0,t.jsx)(l.O,{mt:6,height:30,radius:"xs"}),(0,t.jsx)(l.O,{mt:6,height:30,radius:"xs"}),(0,t.jsx)(l.O,{mt:6,height:30,radius:"xs"}),(0,t.jsx)(l.O,{mt:6,height:30,radius:"xs"}),(0,t.jsx)(l.O,{mt:6,height:30,width:"90%",radius:"xs"}),(0,t.jsx)(l.O,{mt:6,height:30,width:"80%",radius:"xs"})]})}i(67294)},96125:function(e,s,i){"use strict";i.d(s,{Z:function(){return u}});var t=i(85893),n=i(11163),l=i(67294),a=i(45578),r=i(70247);function u(e){let{children:s}=e,{pathname:i,push:u}=(0,n.useRouter)(),[c,o]=(0,l.useState)(null),{isAuthenticated:d,isInitialized:m,authUser:x}=(0,a.a)(e=>e);return((0,l.useEffect)(()=>{c&&i!==c&&(o(null),u(c))},[i,u,c]),m)?i.includes("/reset-password")?(i!==c&&o(i),u("/reset-password"),(0,t.jsx)("div",{})):!d&&i.includes("/signin")?(i!==c&&o(i),u("/signin"),(0,t.jsx)("div",{})):d?d&&((null==x?void 0:x.isSuperAdmin)===!0||(null==x?void 0:x.isAdmin)===!0||(null==x?void 0:x.isTestAdmin)===!0)?(0,t.jsx)(t.Fragment,{children:s}):d&&(null==x?void 0:x.isSuperAdmin)===!1&&(null==x?void 0:x.isAdmin)===!1&&(null==x?void 0:x.isTestAdmin)===!1?(0,t.jsx)(r.default,{}):(0,t.jsx)("div",{}):(u("/signin"),(0,t.jsx)("div",{})):(0,t.jsx)("div",{})}},60668:function(e,s,i){"use strict";i.d(s,{T:function(){return u}});var t=i(86650),n=i(76770),l=i.n(n),a=i(57632);let r=e=>{let{file:s}=e;return new Promise(e=>{l().imageFileResizer(s,1500,1500,"JPEG",95,0,s=>{e(s)},"base64")})},u=async e=>{let{file:s}=e,i="",n=(0,t.cF)(),l=(0,t.iH)(n,"images/".concat((0,a.Z)(),".jpeg")),u=await r({file:s});try{let e=await (0,t.sf)(l,u,"data_url");i=await (0,t.Jt)(e.ref)}catch(e){}return i}},70247:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return o}});var t=i(85893),n=i(7414),l=i(95117),a=i(67841),r=i(11163),u=i(58185),c=i(43759);function o(){let e=(0,r.useRouter)();return(0,t.jsx)(u.Z,{title:"No Access",children:(0,t.jsxs)(n.x,{className:"flex flex-col items-center justify-center h-screen dark:bg-dark-100 bg-light-100",children:[(0,t.jsx)(l.x,{className:"mb-10 font-bold",children:"You dont have access to this page. Please contact the admin."}),(0,t.jsx)("img",{src:"/svg/404.svg",className:"h-[300px]"}),(0,t.jsx)(a.z,{onClick:function(){(0,c.w7)(),e.push("/signin")},className:"w-[200px] mt-12 border-0 bg-app-primary text-white hover:bg-opacity-90 transition",children:"Back to sign in"})]})})}},76652:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return P}});var t=i(85893),n=i(72445),l=i(7414),a=i(95117),r=i(11163),u=i(67841),c=i(20050),o=i(23833),d=i(80061),m=i(78701),x=i(22167),f=i(77248),h=i(57317),p=i(74922),j=i(67294),g=i(55910),v=i(16310),b=i(83932),N=i(30817),w=i(60668),I=i(85477),A=i(25758),_=i(39140);function y(e){let{id:s}=e,[i,n]=(0,j.useState)(null!=s),[l,a]=(0,j.useState)(null);async function r(){s&&a(await (0,I.V)(s)),n(!1)}return((0,j.useEffect)(()=>{r()},[]),i)?(0,t.jsx)(_.Z,{}):!l&&s?(0,t.jsx)(A.X,{}):(0,t.jsx)(L,{id:s,user:l})}function L(e){var s,i,n;let{id:A,user:_}=e,y=(0,r.useRouter)(),[L,S]=(0,j.useState)(!1),[E,k]=(0,j.useState)(null),Z=v.Ry({profileImage:v.Z_(),subIsLifetime:v.Z_(),subIsLifetimeEndDate:v.hT().nullable(),isAdmin:v.Z_(),isSuperAdmin:v.Z_(),username:v.Z_()}),P=(0,f.c)({validate:(0,h.X)(Z),initialValues:{isAdmin:(null==_?void 0:_.isAdmin)==!0?"Yes":"No",isSuperAdmin:(null==_?void 0:_.isSuperAdmin)==!0?"Yes":"No",subIsLifetime:(null==_?void 0:_.subIsLifetime)==!0?"Yes":"No",subIsLifetimeEndDate:null!==(s=null==_?void 0:_.subIsLifetimeEndDate)&&void 0!==s?s:null,profileImage:null!==(i=null==_?void 0:_.profileImage)&&void 0!==i?i:"",username:null!==(n=null==_?void 0:_.username)&&void 0!==n?n:""}}),z=async()=>{if(!P.validate().hasErrors)try{S(!0);let e=new N._;e.isAdmin="Yes"==P.values.isAdmin,e.isSuperAdmin="Yes"==P.values.isSuperAdmin,e.subIsLifetime="Yes"==P.values.subIsLifetime,e.subIsLifetimeEndDate=P.values.subIsLifetimeEndDate,e.username=P.values.username,e.profileImage=P.values.profileImage,E&&(e.profileImage=await (0,w.T)({file:E})),_&&A&&await (0,I.z)(A,e),S(!1),y.push("/users"),(0,p.c0)({title:"Success",message:"User updated",autoClose:6e3})}catch(e){console.log(e),S(!1),(0,p.c0)({color:"red",title:"Error",message:"There was an error creating the announcement",autoClose:6e3})}};return(0,t.jsx)(l.x,{className:"",children:(0,t.jsxs)(c.r,{align:"start",children:[(0,t.jsxs)(c.r.Col,{md:12,xs:12,children:[(0,t.jsxs)(l.x,{className:"relative",children:[(0,t.jsx)(()=>E||P.values.profileImage?(0,t.jsx)(u.z,{className:"absolute z-40 btn right-2 top-2",onClick:()=>{P.setFieldValue("image",""),k(null)},children:"Remove"}):null,{}),(0,t.jsx)(m.fh,{className:"z-0 p-2 mt-8",multiple:!1,disabled:null!=E||""!=P.values.profileImage,onDrop:e=>{if(e.length>0){let s=e[0];k(Object.assign(s,{preview:URL.createObjectURL(s)}))}},onReject:e=>console.log("rejected files",e),maxSize:3145728,accept:x.d1,children:(0,t.jsx)(()=>""!=P.values.profileImage?(0,t.jsx)(l.x,{className:"relative flex justify-center",children:(0,t.jsx)("img",{className:"h-[300px]",src:P.values.profileImage,alt:"Preview"})}):E?(0,t.jsx)(l.x,{className:"relative flex justify-center",children:(0,t.jsx)("img",{className:"h-[300px]",src:E.preview,alt:"Preview"})}):(0,t.jsx)(l.x,{className:"min-h-[300px] pointer-events-none flex justify-center items-center text-center",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(a.x,{size:"xl",inline:!0,children:"Drag images here or click to select files"}),(0,t.jsx)(a.x,{size:"sm",color:"dimmed",inline:!0,mt:7,children:"Attach as many files as you like, each file should not exceed 5mb"})]})}),{})})]}),(0,t.jsx)(o.p,{className:"mt-4",placeholder:"Superadmin?",label:"Superadmin?",data:["Yes","No"],...P.getInputProps("isSuperAdmin")}),(0,t.jsx)(o.p,{className:"mt-4",placeholder:"Admin?",label:"Admin?",data:["Yes","No"],...P.getInputProps("isAdmin")}),(0,t.jsx)(o.p,{className:"mt-4",placeholder:"Lifetime sub?",label:"Lifetime sub?",data:["Yes","No"],...P.getInputProps("subIsLifetime")}),(0,t.jsx)(b.W,{className:"col-span-1",label:"Lifetime sub end date (Leave blank if the subscription never expires)",...P.getInputProps("subIsLifetimeEndDate")}),(0,t.jsx)(d.o,{className:"mt-4",placeholder:"Title",label:"Username",...P.getInputProps("username")})]}),(0,t.jsx)(c.r.Col,{md:12,xs:12,children:(0,t.jsx)(l.x,{children:(0,t.jsx)(u.z,{onClick:z,leftIcon:(0,t.jsx)(g.Z,{size:14}),variant:"filled",className:"w-full mt-10 text-black transition border-0 bg-app-yellow hover:bg-opacity-90",children:"Submit"})})})]})})}var S=i(58185),E=i(96125),k=i(3649),Z=i(45578);function P(){let e=(0,r.useRouter)(),s=e.query.id,{isAuthenticated:i,isInitialized:u}=(0,Z.a)(e=>e);return(0,t.jsx)(E.Z,{children:(0,t.jsx)(k.Z,{variant:"admin",children:(0,t.jsx)(S.Z,{title:"Users",children:(0,t.jsxs)(n.W,{size:"xl",className:"",children:[(0,t.jsx)(l.x,{className:"flex flex-col w-full mx-auto mt-1 mb-10",children:(0,t.jsx)(a.x,{className:"text-2xl font-semibold leading-10 cursor-pointer",children:"Update User"})}),(0,t.jsx)(y,{id:s})]})})})})}}},function(e){e.O(0,[4793,3053,6897,6951,3484,3903,3981,7928,2888,179],function(){return e(e.s=7916)}),_N_E=e.O()}]);