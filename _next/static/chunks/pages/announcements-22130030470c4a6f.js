(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5496],{9563:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/announcements",function(){return n(3924)}])},5120:function(e,t,n){"use strict";n.d(t,{D:function(){return w}});var r=n(5893),a=n(61),s=n(7414),i=n(5117),o=n(3648),l=n(9834),c=n(3221),d=n(7728),u=n(9604),m=n(4094),h=n(7060),x=n(7294),g=n(6589),f=n(9743),p=n(3738);let v=(e,t,n,r)=>{let a=(0,u.O4)(e.getValue(t),n);return r({itemRank:a}),a.passed};function w(e){var t;let{columns:n,data:u}=e,[w,j]=x.useState({pageIndex:0,pageSize:10}),[b,y]=x.useState([]),[N,k]=x.useState(""),C=(0,m.b7)({data:u,columns:n,state:{sorting:b,pagination:w,globalFilter:N},globalFilterFn:v,onGlobalFilterChange:k,onSortingChange:y,onPaginationChange:j,getCoreRowModel:(0,h.sC)(),getFilteredRowModel:(0,h.vL)(),getPaginationRowModel:(0,h.G_)(),getSortedRowModel:(0,h.tj)()});return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"border rounded shadow-md border-slate-300 border-opacity-30 text-[12px]",children:[(0,r.jsx)("div",{className:"mx-2 mt-2",children:(0,r.jsx)(a.o,{className:"mt-6",placeholder:"Type a keyword to search...",type:"text",value:null!=N?N:"",onChange:e=>k(String(e.target.value))})}),(0,r.jsx)("div",{className:"overflow-auto",children:(0,r.jsxs)("table",{className:"min-w-[1000px] w-full border-transparent",children:[(0,r.jsx)("thead",{className:"",children:C.getHeaderGroups().map(e=>(0,r.jsx)("tr",{className:"p-0 m-0 border-none",children:e.headers.map(e=>(0,r.jsx)("th",{style:{width:150!==e.getSize()?e.getSize():void 0},className:"w-[".concat(e.getSize(),"%]  dark:border-gray-700 text-left py-3 px-2 bg-slate-100 dark:bg-gray-800  text-gray-600 dark:text-gray-300  font-bold"),children:e.isPlaceholder?null:(0,r.jsxs)("div",{className:e.column.getCanSort()?"cursor-pointer select-none flex items-center align-middle":"flex",onClick:e.column.getToggleSortingHandler(),children:[(0,m.ie)(e.column.columnDef.header,e.getContext()),null!==(t=({asc:(0,r.jsx)(g.Z,{className:"ml-1"}),desc:(0,r.jsx)(f.Z,{className:"ml-1"})})[e.column.getIsSorted()])&&void 0!==t?t:(0,r.jsx)(p.Z,{className:"ml-1 text-transparent"})]})},e.id))},e.id))}),(0,r.jsx)("tbody",{children:C.getRowModel().rows.map(e=>(0,r.jsx)("tr",{className:"transition hover:bg-slate-50 hover hover:dark:bg-dark-400",children:e.getVisibleCells().map(e=>(0,r.jsx)("td",{className:"text-left text-[13.5px] py-4 px-2 border-b border-gray-100 dark:border-gray-700",children:(0,m.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2 px-4 py-3",children:[(0,r.jsxs)(s.x,{className:"flex items-center mr-0",children:[(0,r.jsx)(i.x,{className:"mr-2",children:"Rows per page"}),(0,r.jsx)(o.Ph,{className:"w-[70px] p-0 mb-0 native-select-table",iconWidth:0,placeholder:"10",value:w.pageSize.toString(),onChange:e=>{C.setPageSize(Number(e))},data:[{value:"10",label:"10"},{value:"20",label:"20"},{value:"30",label:"30"},{value:"40",label:"40"},{value:"50",label:"50"}]})]}),(0,r.jsxs)("span",{className:"flex items-center gap-1 mr-4",children:[(0,r.jsx)("div",{children:"Page"}),(0,r.jsxs)(i.x,{children:[C.getState().pagination.pageIndex+1," of ",C.getPageCount()]})]}),(0,r.jsxs)(s.x,{className:"flex",children:[(0,r.jsx)(l.A,{className:"mr-2",variant:"subtle",onClick:()=>C.previousPage(),disabled:!C.getCanPreviousPage(),children:(0,r.jsx)(c.Z,{size:30})}),(0,r.jsx)(l.A,{variant:"subtle",onClick:()=>C.nextPage(),disabled:!C.getCanNextPage(),children:(0,r.jsx)(d.Z,{size:30})})]})]})]})})}},6125:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(5893),a=n(1163),s=n(7294),i=n(5578),o=n(247);function l(e){let{children:t}=e,{pathname:n,push:l}=(0,a.useRouter)(),[c,d]=(0,s.useState)(null),{isAuthenticated:u,isInitialized:m,authUser:h}=(0,i.a)(e=>e);return((0,s.useEffect)(()=>{c&&n!==c&&(d(null),l(c))},[n,l,c]),m)?n.includes("/reset-password")?(n!==c&&d(n),l("/reset-password"),(0,r.jsx)("div",{})):!u&&n.includes("/signin")?(n!==c&&d(n),l("/signin"),(0,r.jsx)("div",{})):u?u&&((null==h?void 0:h.isSuperAdmin)===!0||(null==h?void 0:h.isAdmin)===!0||(null==h?void 0:h.isTestAdmin)===!0)?(0,r.jsx)(r.Fragment,{children:t}):u&&(null==h?void 0:h.isSuperAdmin)===!1&&(null==h?void 0:h.isAdmin)===!1&&(null==h?void 0:h.isTestAdmin)===!1?(0,r.jsx)(o.default,{}):(0,r.jsx)("div",{}):(l("/signin"),(0,r.jsx)("div",{})):(0,r.jsx)("div",{})}},4984:function(e,t,n){"use strict";n.d(t,{$q:function(){return l},IK:function(){return d},sY:function(){return c},yL:function(){return m}});var r=n(6154),a=n(9828),s=n(8715),i=n(6418),o=n(5477);async function l(e){try{var t;let n=i.U_.currentUser,l=await (0,o.V)(n.uid);if(!l)throw Error("No user found!");if(!l.isSuperAdmin&&!l.isAdmin)throw Error("You are not authorized to create announcements.");let c=await (null===(t=i.U_.currentUser)||void 0===t?void 0:t.getIdToken(!0));return await (0,a.ET)((0,a.hJ)(i.$V,"announcements"),{...s.j.toJson(e),timestampCreated:(0,a.Bt)()}),await h(),await r.Z.post("/api/notifications",{title:e.title,body:e.body.substring(0,50),jsonWebToken:c}),!0}catch(e){throw Error(e.message)}}async function c(e,t){let n={...s.j.toJson(t),timestampUpdated:(0,a.Bt)()};delete n.timestampCreated;try{let t=i.U_.currentUser,r=await (0,o.V)(t.uid);if(!r)throw Error("No user found!");if(!r.isSuperAdmin&&!r.isAdmin)throw Error("You are not authorized to update announcements.");return await (0,a.r7)((0,a.JU)(i.$V,"announcements",e),{...n}),await h(),!0}catch(e){throw Error(e.message)}}async function d(e){try{let t=await (0,a.QT)((0,a.JU)(i.$V,"announcements",e));if(!t.data())return null;return s.j.fromJson({...t.data(),id:t.id})}catch(e){throw Error(e.message)}}async function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;try{let t=await (0,a.PL)((0,a.IO)((0,a.hJ)(i.$V,"announcements"),(0,a.b9)(e)));return t.docs.map(e=>s.j.fromJson({...e.data(),id:e.id}))}catch(e){throw Error(e.message)}}async function m(e){try{let t=i.U_.currentUser,n=await (0,o.V)(t.uid);if(!n)throw Error("No user found!");if(!n.isSuperAdmin&&!n.isAdmin)throw Error("You are not authorized to create announcements.");return await (0,a.oe)((0,a.JU)(i.$V,"announcements",e)),await h(),!0}catch(e){throw Error(e.message)}}async function h(){try{let e=await u(50),t=e.map(e=>s.j.toJson(e));return t.sort((e,t)=>t.timestampCreated.getTime()-e.timestampCreated.getTime()),await (0,a.pl)((0,a.JU)(i.$V,"announcementsAggr","announcements"),{data:t,timestampUpdated:(0,a.Bt)()}),!0}catch(e){throw console.log(e),Error(e.message)}}},3924:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r=n(5893),a=n(7414),s=n(2445),i=n(5117),o=n(7841),l=n(8276),c=n(4922),d=n(7060),u=n(1664),m=n.n(u),h=n(1163),x=n(1252),g=n(3616),f=n(8185),p=n(5120),v=n(6125),w=n(3649),j=n(4984),b=n(5578),y=n(4732);let N=(0,d.Cl)(),k=[N.accessor("timestampCreated",{header:"Date",cell:e=>(0,y.Mu)(e.getValue()),size:170}),N.accessor("title",{header:"Title",cell:e=>e.getValue()}),N.accessor("body",{header:"Body",cell:e=>{var t;return(t=e.getValue()).length>50?t.substring(0,50)+"...":t}}),N.accessor("link",{header:"Link",cell:e=>e.getValue()}),N.accessor("id",{header:"Action",cell:e=>(0,r.jsx)(a.x,{className:"flex items-center justify-center ",children:(0,r.jsx)(E,{id:e.row.original.id})})})];function C(){let{announcements:e}=(0,b.a)(e=>e);return(0,r.jsx)(v.Z,{children:(0,r.jsx)(w.Z,{variant:"admin",children:(0,r.jsx)(f.Z,{title:"Contact",children:(0,r.jsxs)(s.W,{size:"xl",className:"",children:[(0,r.jsxs)(a.x,{className:"flex items-center justify-between mt-2 mb-5 text-center",children:[(0,r.jsx)(i.x,{className:"text-2xl font-semibold leading-10 cursor-pointer",children:"Announcements"}),(0,r.jsx)(m(),{href:"/announcements/create",children:(0,r.jsx)(o.z,{type:"submit",variant:"white",className:"text-black transition border-0 bg-app-yellow hover:bg-opacity-90",children:"New Announcement"})})]}),(0,r.jsx)(p.D,{data:e,columns:k})]})})})})}function E(e){let{id:t}=e,n=(0,h.useRouter)(),s=(0,l.o)(),d=async e=>{s.closeModal(e);try{await (0,j.yL)(t),(0,c.c0)({title:"Success",message:"Announcement deleted",autoClose:6e3})}catch(e){(0,c.c0)({color:"red",title:"Error",message:"There was an error deleting the announcement",autoClose:6e3})}};return(0,r.jsxs)(a.x,{className:"flex",children:[(0,r.jsx)(x.Z,{className:"mr-2 cursor-pointer text-app-yellow",onClick:()=>n.push("/announcements/".concat(t))})," ",(0,r.jsx)(g.Z,{className:"text-red-400 cursor-pointer",onClick:()=>{let e=s.openModal({title:"Are you sure you want to proceed?",centered:!0,children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.x,{size:"sm",children:"Delete this announcement? This action cannot be undone."}),(0,r.jsxs)(a.x,{className:"flex justify-end mt-6",children:[(0,r.jsx)(o.z,{variant:"outline",className:"mx-2 w-min",fullWidth:!0,onClick:()=>s.closeModal(e),mt:"md",children:"No don't delete it"}),(0,r.jsx)(o.z,{className:"mx-2 w-min btn-delete",fullWidth:!0,onClick:()=>d(e),mt:"md",children:"Delete Announcement"})]})]})})}})]})}},247:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(5893),a=n(7414),s=n(5117),i=n(7841),o=n(1163),l=n(8185),c=n(3759);function d(){let e=(0,o.useRouter)();return(0,r.jsx)(l.Z,{title:"No Access",children:(0,r.jsxs)(a.x,{className:"flex flex-col items-center justify-center h-screen dark:bg-dark-100 bg-light-100",children:[(0,r.jsx)(s.x,{className:"mb-10 font-bold",children:"You dont have access to this page. Please contact the admin."}),(0,r.jsx)("img",{src:"/svg/404.svg",className:"h-[300px]"}),(0,r.jsx)(i.z,{onClick:function(){(0,c.w7)(),e.push("/signin")},className:"w-[200px] mt-12 border-0 bg-app-primary text-white hover:bg-opacity-90 transition",children:"Back to sign in"})]})})}},4732:function(e,t,n){"use strict";n.d(t,{Mu:function(){return s},Pp:function(){return i}});var r=n(6794),a=n(9828);function s(e){return e?(e instanceof a.EK&&(e=e.toDate()),(0,r.Z)(new Date(e),"dd MMM, yyyy")):""}function i(e){return e?(e instanceof a.EK&&(e=e.toDate()),(0,r.Z)(new Date(e),"MMM-d-yyyy @ p")):""}},1252:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2581),a=n(7294),s=["size","color"];function i(e){var t=e.size,n=void 0===t?24:t,i=e.color,o=(0,r.Kd)(e,s);return a.createElement("svg",(0,r.gY)({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-edit",width:n,height:n,viewBox:"0 0 24 24",stroke:void 0===i?"currentColor":i,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},o),a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.createElement("path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"}),a.createElement("path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"}),a.createElement("path",{d:"M16 5l3 3"}))}},3616:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2581),a=n(7294),s=["size","color"];function i(e){var t=e.size,n=void 0===t?24:t,i=e.color,o=(0,r.Kd)(e,s);return a.createElement("svg",(0,r.gY)({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-trash",width:n,height:n,viewBox:"0 0 24 24",stroke:void 0===i?"currentColor":i,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},o),a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.createElement("line",{x1:"4",y1:"7",x2:"20",y2:"7"}),a.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),a.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"}),a.createElement("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),a.createElement("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"}))}}},function(e){e.O(0,[4793,3053,6154,3143,3981,9774,2888,179],function(){return e(e.s=9563)}),_N_E=e.O()}]);