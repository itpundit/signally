(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2176],{81:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin",function(){return t(94190)}])},94190:function(e,s,t){"use strict";let l;t.r(s),t.d(s,{default:function(){return I},getInitialProps:function(){return R}});var a=t(85893),n=t(72445),o=t(7414),i=t(95117),r=t(80061),c=t(67841),d=t(77248),u=t(57317),p=t(74922),x=t(11163),f=t(67294),m=t(55910),w=t(16310),h=t(43759),g=t(45578);function j(){let e=(0,x.useRouter)(),[s,t]=(0,f.useState)(!1),{isAuthenticated:l,isInitialized:n}=(0,g.a)(e=>e),{streamAuthUserAdmin:j}=(0,g.a)(e=>e),v=w.Ry({email:w.Z_().required("Required"),password:w.Z_().required("Required")}),E=(0,d.c)({validate:(0,u.X)(v),initialValues:{email:"",password:""}}),N=async()=>{if(!E.validate().hasErrors)try{t(!0),await (0,h.YR)(E.values.email,E.values.password),e.push("/dashboard"),j(),t(!1)}catch(e){t(!1),(0,p.c0)({color:"red",title:"Error",message:"Invalid email or password",autoClose:6e3})}};return(0,a.jsxs)(o.x,{className:"xs:w-full sm:w-[500px] py-10 px-6 rounded-md",children:[(0,a.jsx)(o.x,{className:"flex flex-col w-full mx-auto text-center ",children:(0,a.jsx)(i.x,{className:"mt-4 text-2xl font-bold",children:"Signally account login"})}),(0,a.jsxs)(o.x,{className:"flex flex-col items-center mt-8",children:[(0,a.jsxs)(o.x,{className:"w-full",children:[(0,a.jsx)(r.o,{placeholder:"Email",label:"Email",radius:0,...E.getInputProps("email")}),(0,a.jsx)(r.o,{type:"password",className:"mt-4",placeholder:"Password",label:"Password",...E.getInputProps("password")}),(0,a.jsx)(c.z,{onClick:N,loading:s,leftIcon:(0,a.jsx)(m.Z,{size:14}),variant:"filled",className:"w-full mt-10 text-black transition border-0 bg-app-yellow hover:bg-opacity-90",children:"Sign in with email"})]}),(0,a.jsx)(o.x,{className:"flex flex-col flex-wrap items-start justify-start w-full mt-4",children:(0,a.jsx)(c.z,{onClick:()=>e.push("/reset-password"),className:"btn-text text-app-yellowText hover:text-opacity-80 text-[14px] mt-[2px] transition",children:"Forgot password?"})})]})]})}function v(){let e=(0,x.useRouter)(),[s,t]=(0,f.useState)(!1),{isAuthenticated:l,isInitialized:n}=(0,g.a)(e=>e),{streamAuthUserAdmin:j}=(0,g.a)(e=>e),v=w.Ry({email:w.Z_().required("Required"),password:w.Z_().required("Required"),passwordConfirm:w.Z_().required("Required").oneOf([w.iH("password")],"Passwords must match")}),E=(0,d.c)({validate:(0,u.X)(v),initialValues:{email:"",password:"",passwordConfirm:""}}),N=async()=>{if(!E.validate().hasErrors)try{t(!0),await (0,h.mW)(E.values.email,E.values.password),e.push("/dashboard"),j(),t(!1)}catch(e){t(!1),console.log(e),(0,p.c0)({color:"red",title:"Error",message:"Invalid email or password",autoClose:6e3})}};return(0,a.jsxs)(o.x,{className:"xs:w-full sm:w-[600px] py-10 px-6 rounded-md h-screen",children:[(0,a.jsxs)(o.x,{className:"flex flex-col w-full mx-auto text-center",children:[(0,a.jsx)(i.x,{className:"mt-10 font-bold xs:text-xl sm:text-2xl",children:"Welcome to Signally"}),(0,a.jsx)(i.x,{className:"mt-2 font-bold xs:text-md sm:text-lg",children:"Please create the admin users below"})]}),(0,a.jsx)(o.x,{className:"flex flex-col items-center mt-8",children:(0,a.jsxs)(o.x,{className:"w-full",children:[(0,a.jsx)(r.o,{className:"mt-4",placeholder:"Email",label:"Email",...E.getInputProps("email")}),(0,a.jsx)(r.o,{type:"password",className:"mt-4",placeholder:"Password",label:"Password",...E.getInputProps("password")}),(0,a.jsx)(r.o,{type:"password",className:"mt-4",placeholder:"Confirm Password",label:"Confirm Password",...E.getInputProps("passwordConfirm")}),(0,a.jsx)(c.z,{onClick:N,loading:s,leftIcon:(0,a.jsx)(m.Z,{size:14}),variant:"filled",className:"w-full mt-10 text-black transition border-0 bg-app-yellow hover:bg-opacity-90",children:"Sign up with email"})]})})]})}var E=t(58185),N=t(3649),y=t(29364),_=t(83454);console.log(_.env.FIREBASE_PRIVATE_KEY);var b=_.env.FIREBASE_PRIVATE_KEY;let P={projectId:"sociwork-956dd",clientEmail:_.env.FIREBASE_CLIENT_EMAIL,privateKey:b.replace(/\\n/g,"\n")},C=y.apps.length>0?y.apps[0]:y.initializeApp({credential:y.credential.cert(P)});function I(e){let{isSuperAdminConfigured:s}=e;return(0,a.jsx)(N.Z,{variant:"logoOnly",children:(0,a.jsx)(E.Z,{title:"Signin",children:(0,a.jsxs)(n.W,{size:"xl",className:"flex items-center justify-center",children:[s&&(0,a.jsx)(j,{}),!s&&(0,a.jsx)(v,{})]})})})}async function R(e){var s;try{await l.collection("appControlsPrivate").doc("appControlsPrivate").get()}catch(e){console.log(e)}let t=await l.collection("appControlsPrivate").doc("appControlsPrivate").get(),a=(null===(s=t.data())||void 0===s?void 0:s.isSuperAdminConfigured)||!1;return{props:{isSuperAdminConfigured:a}}}y.auth(C),l=y.firestore(C)},72694:function(){},92767:function(){},32392:function(){},81149:function(){},19334:function(){},42988:function(){},81337:function(){},46512:function(){},81999:function(){},91148:function(){},85657:function(){},84537:function(){},6392:function(){},57951:function(){},35986:function(){},11486:function(){},20491:function(){},54675:function(){},99421:function(){},62678:function(){},25819:function(){},24112:function(){},52361:function(){},94616:function(){}},function(e){e.O(0,[9929,3714,3662,2055,4282,9774,4793,3053,6897,7943,3981,7928,2888,179],function(){return e(e.s=81)}),_N_E=e.O()}]);