(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5474],{55049:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var a=r(83946),n=r(19013),s=r(13882);function i(e,t){return(0,s.Z)(2,arguments),function(e,t){(0,s.Z)(2,arguments);var r=(0,n.Z)(e),i=(0,a.Z)(t);return isNaN(i)?new Date(NaN):(i&&r.setDate(r.getDate()+i),r)}(e,-(0,a.Z)(t))}},93341:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signals-forex",function(){return r(51984)}])},25120:function(e,t,r){"use strict";r.d(t,{D:function(){return y}});var a=r(85893),n=r(80061),s=r(7414),i=r(95117),o=r(93648),l=r(49834),c=r(73221),d=r(27728),u=r(89604),g=r(74094),m=r(27060),h=r(67294),x=r(66589),f=r(89743),p=r(83738);let w=(e,t,r,a)=>{let n=(0,u.O4)(e.getValue(t),r);return a({itemRank:n}),n.passed};function y(e){var t;let{columns:r,data:u}=e,[y,v]=h.useState({pageIndex:0,pageSize:10}),[j,b]=h.useState([]),[N,k]=h.useState(""),E=(0,g.b7)({data:u,columns:r,state:{sorting:j,pagination:y,globalFilter:N},globalFilterFn:w,onGlobalFilterChange:k,onSortingChange:b,onPaginationChange:v,getCoreRowModel:(0,m.sC)(),getFilteredRowModel:(0,m.vL)(),getPaginationRowModel:(0,m.G_)(),getSortedRowModel:(0,m.tj)()});return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"border rounded shadow-md border-slate-300 border-opacity-30 text-[12px]",children:[(0,a.jsx)("div",{className:"mx-2 mt-2",children:(0,a.jsx)(n.o,{className:"mt-6",placeholder:"Type a keyword to search...",type:"text",value:null!=N?N:"",onChange:e=>k(String(e.target.value))})}),(0,a.jsx)("div",{className:"overflow-auto",children:(0,a.jsxs)("table",{className:"min-w-[1000px] w-full border-transparent",children:[(0,a.jsx)("thead",{className:"",children:E.getHeaderGroups().map(e=>(0,a.jsx)("tr",{className:"p-0 m-0 border-none",children:e.headers.map(e=>(0,a.jsx)("th",{style:{width:150!==e.getSize()?e.getSize():void 0},className:"w-[".concat(e.getSize(),"%]  dark:border-gray-700 text-left py-3 px-2 bg-slate-100 dark:bg-gray-800  text-gray-600 dark:text-gray-300  font-bold"),children:e.isPlaceholder?null:(0,a.jsxs)("div",{className:e.column.getCanSort()?"cursor-pointer select-none flex items-center align-middle":"flex",onClick:e.column.getToggleSortingHandler(),children:[(0,g.ie)(e.column.columnDef.header,e.getContext()),null!==(t=({asc:(0,a.jsx)(x.Z,{className:"ml-1"}),desc:(0,a.jsx)(f.Z,{className:"ml-1"})})[e.column.getIsSorted()])&&void 0!==t?t:(0,a.jsx)(p.Z,{className:"ml-1 text-transparent"})]})},e.id))},e.id))}),(0,a.jsx)("tbody",{children:E.getRowModel().rows.map(e=>(0,a.jsx)("tr",{className:"transition hover:bg-slate-50 hover hover:dark:bg-dark-400",children:e.getVisibleCells().map(e=>(0,a.jsx)("td",{className:"text-left text-[13.5px] py-4 px-2 border-b border-gray-100 dark:border-gray-700",children:(0,g.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 px-4 py-3",children:[(0,a.jsxs)(s.x,{className:"flex items-center mr-0",children:[(0,a.jsx)(i.x,{className:"mr-2",children:"Rows per page"}),(0,a.jsx)(o.Ph,{className:"w-[70px] p-0 mb-0 native-select-table",iconWidth:0,placeholder:"10",value:y.pageSize.toString(),onChange:e=>{E.setPageSize(Number(e))},data:[{value:"10",label:"10"},{value:"20",label:"20"},{value:"30",label:"30"},{value:"40",label:"40"},{value:"50",label:"50"}]})]}),(0,a.jsxs)("span",{className:"flex items-center gap-1 mr-4",children:[(0,a.jsx)("div",{children:"Page"}),(0,a.jsxs)(i.x,{children:[E.getState().pagination.pageIndex+1," of ",E.getPageCount()]})]}),(0,a.jsxs)(s.x,{className:"flex",children:[(0,a.jsx)(l.A,{className:"mr-2",variant:"subtle",onClick:()=>E.previousPage(),disabled:!E.getCanPreviousPage(),children:(0,a.jsx)(c.Z,{size:30})}),(0,a.jsx)(l.A,{variant:"subtle",onClick:()=>E.nextPage(),disabled:!E.getCanNextPage(),children:(0,a.jsx)(d.Z,{size:30})})]})]})]})})}},96125:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(85893),n=r(11163),s=r(67294),i=r(45578),o=r(70247);function l(e){let{children:t}=e,{pathname:r,push:l}=(0,n.useRouter)(),[c,d]=(0,s.useState)(null),{isAuthenticated:u,isInitialized:g,authUser:m}=(0,i.a)(e=>e);return((0,s.useEffect)(()=>{c&&r!==c&&(d(null),l(c))},[r,l,c]),g)?r.includes("/reset-password")?(r!==c&&d(r),l("/reset-password"),(0,a.jsx)("div",{})):!u&&r.includes("/signin")?(r!==c&&d(r),l("/signin"),(0,a.jsx)("div",{})):u?u&&((null==m?void 0:m.isSuperAdmin)===!0||(null==m?void 0:m.isAdmin)===!0||(null==m?void 0:m.isTestAdmin)===!0)?(0,a.jsx)(a.Fragment,{children:t}):u&&(null==m?void 0:m.isSuperAdmin)===!1&&(null==m?void 0:m.isAdmin)===!1&&(null==m?void 0:m.isTestAdmin)===!1?(0,a.jsx)(o.default,{}):(0,a.jsx)("div",{}):(l("/signin"),(0,a.jsx)("div",{})):(0,a.jsx)("div",{})}},74202:function(e,t,r){"use strict";r.d(t,{Ht:function(){return u},NE:function(){return c},Uw:function(){return d},b:function(){return g}});var a=r(6154),n=r(39828),s=r(76592),i=r(6418),o=r(85477),l=r(55049);async function c(e){let{signal:t,sendNotification:r,dbPath:l="signalsCrypto"}=e;if(!t)throw Error("No signal provided!");try{var c;let e=i.U_.currentUser,d=await (0,o.V)(e.uid);if(!d)throw Error("No user found!");if(!d.isSuperAdmin&&!d.isAdmin)throw Error("You are not authorized to create signals.");let u=await (null===(c=i.U_.currentUser)||void 0===c?void 0:c.getIdToken(!0));return await (0,n.ET)((0,n.hJ)(i.$V,l),{...s.j.toJson(t),timestampCreated:(0,n.Bt)(),timestampUpdated:(0,n.Bt)(),timestampLastAutoCheck:(0,n.Bt)()}),await h({dbPath:l}),await x({dbPath:l}),r&&await a.Z.post("/api/notifications",{title:"Signal",body:"New ".concat(t.symbol," signal added"),jsonWebToken:u,runAggregation:!0}),!0}catch(e){throw console.log(e),Error(e.message)}}async function d(e){let{id:t,signal:r,sendNotification:l,dbPath:c="signalsCrypto",isClosed:d=!1}=e;if(!t)throw Error("No id provided!");if(!r)throw Error("No signal provided!");try{var u;let e=i.U_.currentUser,g=await (0,o.V)(e.uid);if(!g)throw Error("No user found!");if(!g.isSuperAdmin&&!g.isAdmin)throw Error("You are not authorized to create signals.");let m=await (null===(u=i.U_.currentUser)||void 0===u?void 0:u.getIdToken(!0)),f=s.j.toJson(r);return delete f.timestampLastAutoCheck,!d&&(await (0,n.r7)((0,n.JU)(i.$V,c,t),{...s.j.toJson(f),timestampUpdated:(0,n.Bt)()}),l&&await a.Z.post("/api/notifications",{title:"Signal",body:"".concat(r.symbol," Signal updated"),jsonWebToken:m,runAggregation:!0})),d&&(await (0,n.r7)((0,n.JU)(i.$V,c,t),{...s.j.toJson(f),isClosedManual:!0,isClosedAuto:!1,isClosed:!0,timestampClosed:(0,n.Bt)()}),l&&await a.Z.post("/api/notifications",{title:"Signal",body:"".concat(r.symbol," Signal closed closed"),jsonWebToken:m,runAggregation:!0})),await h({dbPath:c}),await x({dbPath:c}),!0}catch(e){throw console.log(e),Error(e.message)}}async function u(e){let{id:t,dbPath:r}=e;if(!t)throw Error("No id provided!");try{let e=await (0,n.QT)((0,n.JU)(i.$V,r,t));if(!e.data())return null;return s.j.fromJson({...e.data(),id:e.id})}catch(e){return console.log(e),null}}async function g(e){let{id:t,dbPath:r}=e;if(!t)throw Error("No id provided!");try{let e=i.U_.currentUser,a=await (0,o.V)(e.uid);if(!a)throw Error("No user found!");if(!a.isSuperAdmin&&!a.isAdmin)throw Error("You are not authorized to delete signals.");return await (0,n.oe)((0,n.JU)(i.$V,r,t)),await h({dbPath:r}),await x({dbPath:r}),!0}catch(e){throw Error(e.message)}}async function m(e){let{dbPath:t}=e;try{let e=await (0,n.PL)((0,n.IO)((0,n.hJ)(i.$V,t),(0,n.ar)("isClosed","==",!1))),r=e.docs.map(e=>s.j.fromJson({...e.data(),id:e.id}));return r.sort((e,t)=>e.getEntryDateTime>t.getEntryDateTime?-1:1)}catch(e){return console.log(e),[]}}async function h(e){let{dbPath:t}=e;try{let e=await m({dbPath:t}),r=e.map(e=>s.j.toJson(e)),a="crypto";"signalsForex"===t&&(a="forex"),"signalsStocks"===t&&(a="stocks");let o=r.length>0;return await (0,n.pl)((0,n.JU)(i.$V,"signalsAggrOpen",a),{data:r,hasData:o,timestampUpdated:(0,n.Bt)()},{merge:!0}),!0}catch(e){throw console.log(e),Error(e.message)}}async function x(e){let{dbPath:t}=e;try{let e=(0,l.Z)(new Date,30),r=await (0,n.PL)((0,n.IO)((0,n.hJ)(i.$V,t),(0,n.ar)("entryDateTime",">",e))),a=r.docs.map(e=>s.j.fromJson({...e.data(),id:e.id}));a=a.filter(e=>e.takeProfit1DateTime||e.stopLossDateTime);let o=a.filter(e=>e.getEntryDateTime>(0,l.Z)(new Date,14)),c=a.filter(e=>e.getEntryDateTime>(0,l.Z)(new Date,7)),d=a.length,u=o.length,g=c.length,m=a.filter(e=>e.takeProfit1Hit).length,h=o.filter(e=>e.takeProfit1Hit).length,x=c.filter(e=>e.takeProfit1Hit).length,f="crypto";return"signalsForex"===t&&(f="forex"),"signalsStocks"===t&&(f="stocks"),await (0,n.pl)((0,n.JU)(i.$V,"signalsAggrOpen",f),{performance7Days:{trades:g,profitPercentPerTrade:0,wins:x,winRate:g>0?x/g:0},performance14Days:{trades:u,profitPercentPerTrade:0,wins:h,winRate:u>0?h/u:0},performance30Days:{trades:d,profitPercentPerTrade:0,wins:m,winRate:d>0?m/d:0},timestampUpdated:(0,n.Bt)()},{merge:!0}),!0}catch(e){throw console.log(e),Error(e.message)}}},70247:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var a=r(85893),n=r(7414),s=r(95117),i=r(67841),o=r(11163),l=r(58185),c=r(43759);function d(){let e=(0,o.useRouter)();return(0,a.jsx)(l.Z,{title:"No Access",children:(0,a.jsxs)(n.x,{className:"flex flex-col items-center justify-center h-screen dark:bg-dark-100 bg-light-100",children:[(0,a.jsx)(s.x,{className:"mb-10 font-bold",children:"You dont have access to this page. Please contact the admin."}),(0,a.jsx)("img",{src:"/svg/404.svg",className:"h-[300px]"}),(0,a.jsx)(i.z,{onClick:function(){(0,c.w7)(),e.push("/signin")},className:"w-[200px] mt-12 border-0 bg-app-primary text-white hover:bg-opacity-90 transition",children:"Back to sign in"})]})})}},51984:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return E}});var a=r(85893),n=r(95117),s=r(7414),i=r(72445),o=r(67841),l=r(38276),c=r(74922),d=r(27060),u=r(41664),g=r.n(u),m=r(11163),h=r(81252),x=r(83616),f=r(58185),p=r(25120),w=r(96125),y=r(3649),v=r(74202),j=r(45578),b=r(84732);let N=(0,d.Cl)(),k=[N.accessor("entryDateTime",{header:"Entry Date",cell:e=>(0,b.Pp)(e.getValue()),size:200}),N.accessor("isAuto",{header:"Auto",cell:e=>(0,a.jsx)(n.x,{children:e.getValue()?"Yes":"No"})}),N.accessor("getSignalOpenStatus",{header:"Status",cell:e=>(0,a.jsx)(n.x,{children:e.getValue()})}),N.accessor("isFree",{header:"Free",cell:e=>(0,a.jsx)(n.x,{children:e.getValue()?"Yes":"No"})}),N.accessor("entryType",{header:"Type",cell:e=>e.getValue()}),N.accessor("symbol",{header:"Symbol",cell:e=>e.getValue()}),N.accessor("entryPrice",{header:"Entry",cell:e=>e.getValue()}),N.accessor("stopLoss",{header:"Stop Loss",cell:e=>e.getValue()}),N.accessor("takeProfit1",{header:"Take Profit",cell:e=>e.getValue()}),N.accessor("takeProfit2",{header:"Take Profit",cell:e=>e.getValue()}),N.accessor("takeProfit3",{header:"Take Profit",cell:e=>e.getValue()}),N.accessor("id",{header:"Action",cell:e=>(0,a.jsx)(s.x,{className:"flex items-center justify-center ",children:(0,a.jsx)(C,{id:e.row.original.id})})})];function E(){let e=(0,j.a)(e=>e.signalsForexOpen)||[],t=(0,j.a)(e=>e.signalsForexClosed)||[],r=(0,m.useRouter)(),l=r.query.isClosed||"";return(0,a.jsx)(w.Z,{children:(0,a.jsx)(y.Z,{variant:"admin",children:(0,a.jsx)(f.Z,{title:"Signally",children:(0,a.jsxs)(i.W,{size:"xl",className:"",children:[(0,a.jsxs)(s.x,{className:"flex items-center justify-between mt-2 mb-5 text-center",children:[(0,a.jsxs)(n.x,{className:"text-2xl font-semibold leading-10 cursor-pointer",children:["true"==l?"Closed":"Open"," forex signals"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(g(),{href:"/signals-forex/create?isAuto=false",className:"mr-4",children:(0,a.jsx)(o.z,{type:"submit",variant:"white",className:"text-white transition bg-opacity-50 border-0 bg-app-secondary hover:bg-opacity-90",children:"New manual signal"})}),(0,a.jsx)(g(),{href:"/signals-forex/create?isAuto=true",children:(0,a.jsx)(o.z,{type:"submit",variant:"white",className:"text-black transition border-0 bg-app-yellow hover:bg-opacity-90",children:"New auto signal"})})]})]}),(0,a.jsx)(p.D,{data:"false"===l?e:"true"===l?t:e,columns:k})]})})})})}function C(e){let{id:t}=e,r=(0,m.useRouter)(),i=(0,l.o)(),d=async e=>{i.closeModal(e);try{t&&await (0,v.b)({id:t,dbPath:"signalsForex"}),(0,c.c0)({title:"Success",message:"Signal deleted",autoClose:6e3})}catch(e){(0,c.c0)({color:"red",title:"Error",message:"There was an error deleting the signal",autoClose:6e3})}};return(0,a.jsxs)(s.x,{className:"flex",children:[(0,a.jsx)(h.Z,{size:20,className:"mr-2 cursor-pointer text-app-yellow",onClick:()=>r.push("/signals-forex/".concat(t))})," ",(0,a.jsx)(x.Z,{size:20,className:"text-red-400 cursor-pointer",onClick:()=>{let e=i.openModal({title:"Are you sure you want to proceed?",centered:!0,children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.x,{size:"sm",children:"Delete this signal? This action cannot be undone."}),(0,a.jsxs)(s.x,{className:"flex justify-end mt-6",children:[(0,a.jsx)(o.z,{variant:"outline",className:"mx-2 border w-min border-light-800 text-dark-400",fullWidth:!0,onClick:()=>i.closeModal(e),mt:"md",children:"No don't delete it"}),(0,a.jsx)(o.z,{className:"mx-2 w-min btn-delete",fullWidth:!0,onClick:()=>d(e),mt:"md",children:"Delete signal"})]})]})})}})]})}},84732:function(e,t,r){"use strict";r.d(t,{Mu:function(){return s},Pp:function(){return i}});var a=r(56794),n=r(39828);function s(e){return e?(e instanceof n.EK&&(e=e.toDate()),(0,a.Z)(new Date(e),"dd MMM, yyyy")):""}function i(e){return e?(e instanceof n.EK&&(e=e.toDate()),(0,a.Z)(new Date(e),"MMM-d-yyyy @ p")):""}},81252:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var a=r(22581),n=r(67294),s=["size","color"];function i(e){var t=e.size,r=void 0===t?24:t,i=e.color,o=(0,a.Kd)(e,s);return n.createElement("svg",(0,a.gY)({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-edit",width:r,height:r,viewBox:"0 0 24 24",stroke:void 0===i?"currentColor":i,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},o),n.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"}),n.createElement("path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"}),n.createElement("path",{d:"M16 5l3 3"}))}},83616:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var a=r(22581),n=r(67294),s=["size","color"];function i(e){var t=e.size,r=void 0===t?24:t,i=e.color,o=(0,a.Kd)(e,s);return n.createElement("svg",(0,a.gY)({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-trash",width:r,height:r,viewBox:"0 0 24 24",stroke:void 0===i?"currentColor":i,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},o),n.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),n.createElement("line",{x1:"4",y1:"7",x2:"20",y2:"7"}),n.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),n.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"}),n.createElement("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),n.createElement("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"}))}}},function(e){e.O(0,[4793,3053,6154,3143,3981,7928,2888,179],function(){return e(e.s=93341)}),_N_E=e.O()}]);