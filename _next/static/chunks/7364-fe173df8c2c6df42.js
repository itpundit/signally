"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7364],{3833:function(e,t,r){r.d(t,{p:function(){return w}});var i=r(7294),n=r(4761),a=r(3498),s=r(6261),l=r(4151),o=Object.defineProperty,c=Object.defineProperties,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&p(e,r,t[r]);if(d)for(var r of d(t))f.call(t,r)&&p(e,r,t[r]);return e},v=(e,t)=>c(e,u(t)),g=(e,t)=>{var r={};for(var i in e)m.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&d)for(var i of d(e))0>t.indexOf(i)&&f.call(e,i)&&(r[i]=e[i]);return r};let x={size:"sm"},w=(0,i.forwardRef)((e,t)=>{let r=(0,s.k)("NativeSelect",x,e),{inputProps:o,wrapperProps:c,data:u,onChange:d,value:m,classNames:f,styles:p,rightSection:w,rightSectionWidth:j}=r,b=g(r,["inputProps","wrapperProps","data","onChange","value","classNames","styles","rightSection","rightSectionWidth"]),y=(0,n.rZ)(),O=u.map(e=>"string"==typeof e?{label:e,value:e}:e),N=O.map(e=>i.createElement("option",{key:e.value,value:e.value,disabled:e.disabled},e.label));return i.createElement(l.I.Wrapper,v(h({},c),{__staticSelector:"NativeSelect"}),i.createElement(l.I,h(v(h(h({},o),b),{onChange:d,component:"select",ref:t,value:null===m?"":m,__staticSelector:"NativeSelect",pointer:"pointer"===y.cursorType}),(0,a.o)({theme:y,rightSection:w,rightSectionWidth:j,styles:p,shouldClear:!1,size:o.size,error:c.error,readOnly:!1})),N))});w.displayName="@mantine/core/NativeSelect"},3498:function(e,t,r){r.d(t,{o:function(){return F}});var i=r(7294),n=r(6768),a=r(4761),s=r(4258),l=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))u.call(t,r)&&d(e,r,t[r]);return e},f=(e,t)=>{var r={};for(var i in e)c.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&o)for(var i of o(e))0>t.indexOf(i)&&u.call(e,i)&&(r[i]=e[i]);return r};let p={xs:(0,n.h)(14),sm:(0,n.h)(18),md:(0,n.h)(20),lg:(0,n.h)(24),xl:(0,n.h)(28)};function h(e){var{size:t,error:r,style:n}=e,l=f(e,["size","error","style"]);let o=(0,a.rZ)(),c=(0,s.a)({size:t,sizes:p});return i.createElement("svg",m({width:c,height:c,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:m({color:r?o.colors.red[6]:o.colors.gray[6]},n),"data-chevron":!0},l),i.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var v=r(971),g=Object.defineProperty,x=Object.defineProperties,w=Object.getOwnPropertyDescriptors,j=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,N=(e,t)=>{for(var r in t||(t={}))b.call(t,r)&&O(e,r,t[r]);if(j)for(var r of j(t))y.call(t,r)&&O(e,r,t[r]);return e},E=(e,t)=>x(e,w(t));function P({shouldClear:e,clearButtonProps:t,onClear:r,size:n,error:a}){return e?i.createElement(v.P,E(N({},t),{variant:"transparent",onClick:r,size:n,onMouseDown:e=>e.preventDefault()})):i.createElement(h,{error:a,size:n})}P.displayName="@mantine/core/SelectRightSection";var S=Object.defineProperty,C=Object.defineProperties,k=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,Z=(e,t,r)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_=(e,t)=>{for(var r in t||(t={}))z.call(t,r)&&Z(e,r,t[r]);if(L)for(var r of L(t))R.call(t,r)&&Z(e,r,t[r]);return e},A=(e,t)=>C(e,k(t)),U=(e,t)=>{var r={};for(var i in e)z.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&L)for(var i of L(e))0>t.indexOf(i)&&R.call(e,i)&&(r[i]=e[i]);return r};function F(e){var{styles:t,rightSection:r,rightSectionWidth:n,theme:a}=e,s=U(e,["styles","rightSection","rightSectionWidth","theme"]);if(r)return{rightSection:r,rightSectionWidth:n,styles:t};let l="function"==typeof t?t(a):t;return{rightSection:!s.readOnly&&!(s.disabled&&s.shouldClear)&&i.createElement(P,_({},s)),styles:A(_({},l),{rightSection:A(_({},null==l?void 0:l.rightSection),{pointerEvents:s.shouldClear?void 0:"none"})})}}},8370:function(e,t,r){r.d(t,{Z:function(){return O}});var i=r(5893),n=r(7841),a=r(7414),s=r(5117),l=r(3833),o=r(61),c=r(8701),u=r(2167),d=r(7248),m=r(7317),f=r(4922),p=r(1163),h=r(7294),v=r(5910),g=r(6310),x=r(1816),w=r(668),j=r(6198),b=r(5758),y=r(9140);function O(e){let{id:t}=e,[r,n]=(0,h.useState)(null!=t),[a,s]=(0,h.useState)(null);async function l(){t&&s(await (0,j.WG)(t)),n(!1)}return((0,h.useEffect)(()=>{l()},[]),r)?(0,i.jsx)(y.Z,{}):!a&&t?(0,i.jsx)(b.X,{}):(0,i.jsx)(N,{id:t,videoLesson:a})}function N(e){var t,r,b,y;let{id:O,videoLesson:N}=e,E=(0,p.useRouter)(),[P,S]=(0,h.useState)(!1),[C,k]=(0,h.useState)(null),L=g.Ry({title:g.Z_().required("Required"),link:g.Z_().url("Invalid URL").required("Required"),image:g.Z_(),isFree:g.Z_().required("Required"),status:g.Z_().required("Required")}),z=(0,d.c)({validate:(0,m.X)(L),initialValues:{title:null!==(t=null==N?void 0:N.title)&&void 0!==t?t:"",link:null!==(r=null==N?void 0:N.link)&&void 0!==r?r:"",image:null!==(b=null==N?void 0:N.image)&&void 0!==b?b:"",isFree:(null==N?void 0:N.isFree)==!1?"No":"Yes",status:null!==(y=null==N?void 0:N.status)&&void 0!==y?y:"Draft"}}),R=async()=>{if(!z.validate().hasErrors)try{var e,t;S(!0);let r=new x.n;r.title=z.values.title,r.link=z.values.link,r.timestampCreated=null!==(e=null==N?void 0:N.timestampCreated)&&void 0!==e?e:new Date,r.image=null!==(t=null==N?void 0:N.image)&&void 0!==t?t:"",r.isFree="Yes"==z.values.isFree,r.status=z.values.status,C&&(r.image=await (0,w.T)({file:C})),N||await (0,j.mF)(r),N&&O&&await (0,j.S2)(O,r),S(!1),E.push("/video-lessons"),(0,f.c0)({title:"Success",message:"Video Lesson was created",autoClose:6e3})}catch(e){console.log(e),S(!1),(0,f.c0)({color:"red",title:"Error",message:"There was an error creating the announcement",autoClose:6e3})}};return(0,i.jsxs)(a.x,{className:"",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-x-4 ",children:[(0,i.jsx)(l.p,{className:"",placeholder:"Free?",label:"Free?",data:["Yes","No"],...z.getInputProps("isFree")}),(0,i.jsx)(l.p,{className:"",placeholder:"Status",label:"Post status",data:["Draft","Published","Archived"],...z.getInputProps("status")})]}),(0,i.jsx)(o.o,{className:"mt-4",placeholder:"Title",label:"Title",...z.getInputProps("title")}),(0,i.jsx)(o.o,{className:"mt-4",placeholder:"Link",label:"Link",...z.getInputProps("link")}),(0,i.jsxs)(a.x,{className:"relative",children:[(0,i.jsx)(()=>C||z.values.image?(0,i.jsx)(n.z,{className:"absolute z-40 btn right-2 top-2",onClick:()=>{z.setFieldValue("image",""),k(null)},children:"Remove"}):null,{}),(0,i.jsx)(c.fh,{className:"z-0 p-2 mt-8",multiple:!1,disabled:null!=C||""!=z.values.image,onDrop:e=>{if(e.length>0){let t=e[0];k(Object.assign(t,{preview:URL.createObjectURL(t)}))}},onReject:e=>console.log("rejected files",e),maxSize:3145728,accept:u.d1,children:(0,i.jsx)(()=>""!=z.values.image?(0,i.jsx)(a.x,{className:"relative flex justify-center",children:(0,i.jsx)("img",{className:"h-[300px]",src:z.values.image,alt:"Preview"})}):C?(0,i.jsx)(a.x,{className:"relative flex justify-center",children:(0,i.jsx)("img",{className:"h-[300px]",src:C.preview,alt:"Preview"})}):(0,i.jsx)(a.x,{className:"min-h-[300px] pointer-events-none flex justify-center items-center text-center",children:(0,i.jsxs)("div",{children:[(0,i.jsx)(s.x,{size:"xl",inline:!0,children:"Drag images here or click to select files"}),(0,i.jsx)(s.x,{size:"sm",color:"dimmed",inline:!0,mt:7,children:"Attach as many files as you like, each file should not exceed 5mb"})]})}),{})})]}),(0,i.jsx)(a.x,{children:(0,i.jsx)(n.z,{onClick:R,loading:P,leftIcon:(0,i.jsx)(v.Z,{size:14}),variant:"filled",className:"w-full mt-10 text-black transition border-0 bg-app-yellow hover:bg-opacity-90",children:"Submit"})})]})}},5758:function(e,t,r){r.d(t,{X:function(){return s}});var i=r(5893),n=r(7414),a=r(5117);function s(e){let{}=e;return(0,i.jsxs)(n.x,{className:"border p-10 flex flex-col items-center rounded-md",children:[(0,i.jsx)("img",{className:"w-[400px] object-contain",src:"/images/form-error.png",alt:""}),(0,i.jsx)(a.x,{className:"text-center mt-10",children:"There was an error loading the form. Please try again later."})]})}r(7294)},9140:function(e,t,r){r.d(t,{Z:function(){return s}});var i=r(5893),n=r(7414),a=r(8623);function s(e){let{}=e;return(0,i.jsxs)(n.x,{className:"",children:[(0,i.jsx)(a.O,{mt:6,height:30,radius:"xs"}),(0,i.jsx)(a.O,{mt:6,height:30,radius:"xs"}),(0,i.jsx)(a.O,{mt:6,height:30,radius:"xs"}),(0,i.jsx)(a.O,{mt:6,height:30,radius:"xs"}),(0,i.jsx)(a.O,{mt:6,height:30,width:"90%",radius:"xs"}),(0,i.jsx)(a.O,{mt:6,height:30,width:"80%",radius:"xs"})]})}r(7294)},6125:function(e,t,r){r.d(t,{Z:function(){return o}});var i=r(5893),n=r(1163),a=r(7294),s=r(5578),l=r(247);function o(e){let{children:t}=e,{pathname:r,push:o}=(0,n.useRouter)(),[c,u]=(0,a.useState)(null),{isAuthenticated:d,isInitialized:m,authUser:f}=(0,s.a)(e=>e);return((0,a.useEffect)(()=>{c&&r!==c&&(u(null),o(c))},[r,o,c]),m)?r.includes("/reset-password")?(r!==c&&u(r),o("/reset-password"),(0,i.jsx)("div",{})):!d&&r.includes("/signin")?(r!==c&&u(r),o("/signin"),(0,i.jsx)("div",{})):d?d&&((null==f?void 0:f.isSuperAdmin)===!0||(null==f?void 0:f.isAdmin)===!0||(null==f?void 0:f.isTestAdmin)===!0)?(0,i.jsx)(i.Fragment,{children:t}):d&&(null==f?void 0:f.isSuperAdmin)===!1&&(null==f?void 0:f.isAdmin)===!1&&(null==f?void 0:f.isTestAdmin)===!1?(0,i.jsx)(l.default,{}):(0,i.jsx)("div",{}):(o("/signin"),(0,i.jsx)("div",{})):(0,i.jsx)("div",{})}},668:function(e,t,r){r.d(t,{T:function(){return o}});var i=r(6650),n=r(6770),a=r.n(n),s=r(7632);let l=e=>{let{file:t}=e;return new Promise(e=>{a().imageFileResizer(t,1500,1500,"JPEG",95,0,t=>{e(t)},"base64")})},o=async e=>{let{file:t}=e,r="",n=(0,i.cF)(),a=(0,i.iH)(n,"images/".concat((0,s.Z)(),".jpeg")),o=await l({file:t});try{let e=await (0,i.sf)(a,o,"data_url");r=await (0,i.Jt)(e.ref)}catch(e){}return r}},6198:function(e,t,r){r.d(t,{S2:function(){return o},WG:function(){return c},fl:function(){return d},mF:function(){return l}});var i=r(9828),n=r(1816),a=r(6418),s=r(5477);async function l(e){let t={...n.n.toJson(e)};delete t.id;try{let e=a.U_.currentUser,r=await (0,s.V)(e.uid);if(!r)throw Error("No user found!");if(!r.isSuperAdmin&&!r.isAdmin)throw Error("You are not authorized to update videos.");return await (0,i.ET)((0,i.hJ)(a.$V,"videoLessons"),{...t}),await m(),!0}catch(e){throw Error(e.message)}}async function o(e,t){let r={...n.n.toJson(t),timestampUpdated:(0,i.Bt)()};delete r.timestampCreated;try{let t=a.U_.currentUser,n=await (0,s.V)(t.uid);if(!n)throw Error("No user found!");if(!n.isSuperAdmin&&!n.isAdmin)throw Error("You are not authorized to update videos.");return await (0,i.r7)((0,i.JU)(a.$V,"videoLessons",e),{...r}),await m(),!0}catch(e){throw Error(e.message)}}async function c(e){try{let t=await (0,i.QT)((0,i.JU)(a.$V,"videoLessons",e));if(!t.data())return null;return n.n.fromJson({...t.data(),id:t.id})}catch(e){return null}}async function u(){try{let e=await (0,i.PL)((0,i.IO)((0,i.hJ)(a.$V,"videoLessons"),(0,i.ar)("status","==","Published"),(0,i.b9)(50)));return e.docs.map(e=>n.n.fromJson({...e.data(),id:e.id}))}catch(e){return[]}}async function d(e){try{let t=a.U_.currentUser,r=await (0,s.V)(t.uid);if(!r)throw Error("No user found!");if(!r.isSuperAdmin&&!r.isAdmin)throw Error("You are not authorized to update videos.");return await (0,i.oe)((0,i.JU)(a.$V,"videoLessons",e)),await m(),!0}catch(e){throw Error(e.message)}}async function m(){try{let e=await u(),t=e.map(e=>n.n.toJson(e));return t.sort((e,t)=>t.timestampCreated.getTime()-e.timestampCreated.getTime()),await (0,i.pl)((0,i.JU)(a.$V,"videoLessonsAggr","videoLessons"),{data:t,timestampUpdated:(0,i.Bt)()}),!0}catch(e){throw console.log(e),Error(e.message)}}},247:function(e,t,r){r.r(t),r.d(t,{default:function(){return u}});var i=r(5893),n=r(7414),a=r(5117),s=r(7841),l=r(1163),o=r(8185),c=r(3759);function u(){let e=(0,l.useRouter)();return(0,i.jsx)(o.Z,{title:"No Access",children:(0,i.jsxs)(n.x,{className:"flex flex-col items-center justify-center h-screen dark:bg-dark-100 bg-light-100",children:[(0,i.jsx)(a.x,{className:"mb-10 font-bold",children:"You dont have access to this page. Please contact the admin."}),(0,i.jsx)("img",{src:"/svg/404.svg",className:"h-[300px]"}),(0,i.jsx)(s.z,{onClick:function(){(0,c.w7)(),e.push("/signin")},className:"w-[200px] mt-12 border-0 bg-app-primary text-white hover:bg-opacity-90 transition",children:"Back to sign in"})]})})}},5910:function(e,t,r){r.d(t,{Z:function(){return s}});var i=r(2581),n=r(7294),a=["size","color"];function s(e){var t=e.size,r=void 0===t?24:t,s=e.color,l=(0,i.Kd)(e,a);return n.createElement("svg",(0,i.gY)({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-send",width:r,height:r,viewBox:"0 0 24 24",stroke:void 0===s?"currentColor":s,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},l),n.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),n.createElement("line",{x1:"10",y1:"14",x2:"21",y2:"3"}),n.createElement("path",{d:"M21 3l-6.5 18a0.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a0.55 .55 0 0 1 0 -1l18 -6.5"}))}}}]);